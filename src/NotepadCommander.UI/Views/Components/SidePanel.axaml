<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:NotepadCommander.UI.ViewModels"
             xmlns:models="using:NotepadCommander.Core.Models"
             xmlns:components="using:NotepadCommander.UI.Views.Components"
             x:Class="NotepadCommander.UI.Views.Components.SidePanel"
             x:CompileBindings="False"
             Width="250">

    <Border Background="#F8FAFC"
            BorderBrush="{StaticResource BorderBrush}"
            BorderThickness="0,0,1,0">
        <Grid RowDefinitions="Auto,Auto,Auto,*">
            <!-- Tab selector: Fichiers / Recherche / Methodes -->
            <Grid ColumnDefinitions="*,*,*" Row="0">
                <Button Name="FilesTabButton"
                        Content="FICHIERS"
                        HorizontalAlignment="Stretch"
                        HorizontalContentAlignment="Center"
                        Classes="btn-toolbar"
                        FontSize="10"
                        FontWeight="SemiBold"
                        Padding="8,6"
                        Click="OnFilesTabClick" />
                <Button Name="SearchTabButton"
                        Grid.Column="1"
                        Content="RECHERCHE"
                        HorizontalAlignment="Stretch"
                        HorizontalContentAlignment="Center"
                        Classes="btn-toolbar"
                        FontSize="10"
                        FontWeight="SemiBold"
                        Padding="8,6"
                        Click="OnSearchTabClick" />
                <Button Name="MethodsTabButton"
                        Grid.Column="2"
                        Content="METHODES"
                        HorizontalAlignment="Stretch"
                        HorizontalContentAlignment="Center"
                        Classes="btn-toolbar"
                        FontSize="10"
                        FontWeight="SemiBold"
                        Padding="8,6"
                        Click="OnMethodsTabClick" />
            </Grid>

            <!-- Files panel content -->
            <Border Grid.Row="1"
                    Name="FilesHeader"
                    Background="{StaticResource ToolbarBrush}"
                    BorderBrush="{StaticResource BorderBrush}"
                    BorderThickness="0,0,0,1"
                    Padding="12,8">
                <Grid ColumnDefinitions="*,Auto">
                    <TextBlock Text="EXPLORATEUR"
                               FontSize="11"
                               FontWeight="SemiBold"
                               Foreground="{StaticResource TextMutedBrush}" />
                    <Button Grid.Column="1" Classes="btn-icon"
                            Width="22" Height="22"
                            ToolTip.Tip="Ouvrir un dossier"
                            Name="OpenFolderButton">
                        <TextBlock Text="+" FontSize="14" FontWeight="Bold"
                                   Foreground="{StaticResource TextSecondaryBrush}" />
                    </Button>
                </Grid>
            </Border>

            <!-- Folder path display -->
            <TextBlock Grid.Row="2"
                       Name="FolderPathText"
                       Text=""
                       FontSize="10"
                       Foreground="{StaticResource TextMutedBrush}"
                       Padding="8,4"
                       TextTrimming="CharacterEllipsis"
                       IsVisible="False" />

            <!-- File tree (files view) -->
            <Grid Grid.Row="3" Name="FilesPanel">
                <TreeView Name="FileTree"
                          Padding="4"
                          IsVisible="False">
                    <TreeView.ItemTemplate>
                        <TreeDataTemplate ItemsSource="{Binding Children}">
                            <StackPanel Orientation="Horizontal" Spacing="6">
                                <TextBlock Text="{Binding Icon}" FontSize="12" VerticalAlignment="Center" />
                                <TextBlock Text="{Binding Name}" FontSize="12" VerticalAlignment="Center" />
                            </StackPanel>
                        </TreeDataTemplate>
                    </TreeView.ItemTemplate>
                </TreeView>

                <!-- Empty state -->
                <TextBlock Name="EmptyState"
                           Text="Glissez un dossier ici&#x0a;ou cliquez + pour ouvrir"
                           HorizontalAlignment="Center"
                           VerticalAlignment="Center"
                           TextAlignment="Center"
                           Foreground="{StaticResource TextMutedBrush}"
                           FontSize="12" />
            </Grid>

            <!-- Search panel -->
            <components:SearchPanel Grid.Row="3"
                                     Name="SearchPanelView"
                                     IsVisible="False" />

            <!-- Method search panel -->
            <components:MethodSearchPanel Grid.Row="3"
                                           Name="MethodSearchPanelView"
                                           IsVisible="False" />
        </Grid>
    </Border>
</UserControl>
